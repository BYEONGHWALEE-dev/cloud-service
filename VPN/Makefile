# Makefile

CC = gcc
CFLAGS = -Wall -Wextra -std=c99 -I include
LDFLAGS = 

# ë””ë ‰í† ë¦¬
SRC_DIR = src
BUILD_DIR = bin
INCLUDE_DIR = include

# íƒ€ê²Ÿ
.PHONY: all clean test

all: $(BUILD_DIR)/tun_test

# TUN í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨
$(BUILD_DIR)/tun_test: $(SRC_DIR)/server/tun_test.c $(SRC_DIR)/server/tun_manager.c
	@mkdir -p $(BUILD_DIR)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)
	@echo "Build complete: $@"

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
test: $(BUILD_DIR)/tun_test
	@echo "Running TUN interface test..."
	@echo "âš ï¸  Run with sudo: sudo ./bin/tun_test"

# ì •ë¦¬
clean:
	rm -rf $(BUILD_DIR)/*
	@echo "ğŸ§¹ Clean complete"

# ë„ì›€ë§
help:
	@echo "VPN Server Build System"
	@echo ""
	@echo "Targets:"
	@echo "  all     - Build all targets"
	@echo "  test    - Show test instructions"
	@echo "  clean   - Remove built files"
	@echo "  help    - Show this help"
